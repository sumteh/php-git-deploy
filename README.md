# PHP Git deploy

Автоматическое развертывание кода из Git на сервер с помощью PHP.

## Использование
 * Добавьте конфиг-файл `config.php` с содержимым:
```php
<?php
define('GIT_SECRET', 'SUPER_SECRET_PASSWORD'); //Секретный пароль, передаваемый при обращении к скрипту
define('GIT_BRANCH', 'master'); //Ветка, из которой будут забираться обновления
?>
```
 * Настройте репозиторий на GitHub для вызова этого скрипта после обновления кода

## Настройка GitHub 
 * Перейдите в https://github.com/USER/REPOSITORY/settings/hooks
 * Нажмите кнопку «Add webhook»
 * Введите «Payload URL», например, http://example.com/git/git.php
 * Заполните поле «Secret», введите секретный пароль, который будет передаваться при обращении к скрипту
 * Выберите событие «Release», оно будет инициировать развертывание
 * Убедитесь, что флажок активности установлен
 * Нажмите кнопку «Add webhook»


При появлении нового релиза в указанной ветке, код из нее будет автоматически залит на сервер.
При возникновении конфликтов будет создана отдельная ветка «conflict-*» и код залит не будет.
